# 编程风格

- 空白有助于提高代码的可读性。
- 一般惯例是加一个前缀或者后缀用于私有变量和局部变量。通常是用下划线“_”来标识。
- 常量通常用全大写，并用下划线来分割单词来标志。
- 小驼峰法 大驼峰法
- 用switch的时候，无论case是否涵括了所有情况，都应该加上Default语句。很多时候结果是不再我们考虑范围内的。应该尽量涵盖所有情况。
- 一般在二元运算符左右需要加一个空格。
- 添加语句上面尽量不要用直接值。
- 虽然可以默认不填写访问控制符。但是我们不推荐这种做法。我们推荐把类里面所有的变量，方法，属性，...都写上访问权限。
- **规范化的指数形式：在指数形式的多种表示方式中把小数部分中小数点前的数字为0，小数点后第1位数字不为0的表示形式称为规范化的指数形式，如0.43242\*10^1就是4.3242的规范化的指数形式。一个实数只有一个规范化的指数形式。**

# 命令相关快捷键

## tab

补全命令、目录、命令参数

## Ctrl+r

在历史记录中搜索命令（含有相关关键字）

## esc之后按.

重新调用上一个命令的参数（如：--all）

## history类（多用于脚本）

`!!` 重复前一个命令

`！字符` 重复前一个以“字符”开头的命令

`!num` 按照历史记录的序号执行命令

`!?abc` 重复之前包含abc的命令

`!-n` 重复n个命令之前的那个命令 

# ctrl类

| 按键              | 作用                       |
| --------------- | ------------------------ |
| `Ctrl+d`        | 键盘输入结束或退出终端              |
| `Ctrl+s`        | 暂停当前程序，暂停后按下任意键恢复运行      |
| `Ctrl+z`        | 将当前程序放到后台运行，恢复到前台为命令`fg` |
| `Ctrl+c`        | 强行终止当前程序                 |
| `Ctrl+a`        | 将光标移至输入行头，相当于`Home`键     |
| `Ctrl+e`        | 将光标移至输入行末，相当于`End`键      |
| `Ctrl+k`        | 删除从光标所在位置到行末             |
| `Alt+Backspace` | 向前删除一个单词                 |
| `Shift+PgUp`    | 将终端显示向上滚动                |
| `Shift+PgDn`    | 将终端显示向下滚动                |

# 用户相关

`su -` 切换至root用户 创建新的终端环境 (常用)

`su` 切换至root用户 不创建新的终端环境

`su -用户名` 切换至该用户

` sudo` 使用管理员身份运行命令

`id` 显示当前用户信息

`passwd` 修改当前用户密码

# BASH作业管理

- 在后台运行进程：在命令后添加一个`&`

- 暂停某个程序：通过Ctrl+z或者发送信号 17

- 管理后台作业

  `jobs` 查看后台进程

  `bg` background继续后台运行进程

  `fg` foreground继续前台运行进程

- 杀掉后台进程

  - 法子1：通过jobs命令查看job号（假设为num），然后执行kill %num

  - 法子2：通过ps命令查看job的进程号（PID，假设为pid），然后执行kill pid
  - 前台进程的终止：Ctrl+c

# Shell 常用通配符

通配符当查找文件夹时，可以使用它来代替一个或多个真正字符；当不知道真正字符或者懒得输入完整名字时，常常使用通配符代替一个或多个真正字符。

| 字符                    | 含义                                        |
| ----------------------- | ------------------------------------------- |
| `*`                     | 匹配 0 或多个字符                           |
| `?`                     | 匹配任意一个字符                            |
| `[list]`                | 匹配 list 中的任意单一字符                  |
| `[!list]`               | 匹配 除list 中的任意单一字符以外的字符      |
| `[c1-c2]`               | 匹配 c1-c2 中的任意单一字符 如：[0-9] [a-z] |
| `{string1,string2,...}` | 匹配 string1 或 string2 (或更多)其一字符串  |
| `{c1..c2}`              | 匹配 c1-c2 中全部字符 如{1..10}             |

# LINUX文件系统

## LINUX文件系统结构

- Linux文件系统为一个倒转的单根树状结构
- 文件系统的根为“/”
- 文件系统严格区分大小写
- 路径使用“/”分割，（windows中使用“\”）

## 当前的工作目录

- 每一个shell或系统进程都有一个当前的工作目录
- 使用`pwd`命令可以显示当前的工作目录

## 文件名称

- 文件的名称大小写敏感
- 名称最多可以为255个字符
- 除了正斜线外，都是有效字符
- 通过`touch`命令可以创建一个空白文件或者更新已有文件的时间
- 以“.”开头的文件为隐藏文件

## 列出目录内容

“ls”命令用来列出目录内容

**相关参数**

- `ls -a` 显示所有文件（包括隐藏文件）
- `ls -l` 显示详细信息
- `ls -R` 递归显示子目录结构
- `ls -ld` 显示目录和连接的信息

## 查看文件类型

通过file命令可以查看文件的类型

## 绝对路径与相对路径

**绝对路径**：以“/”开头，递归每级目录直到目标的路径。不受当前所在工作目录的限制（一般使用）

**相对路径**:以当前的目录为起点，到达目标的路径。受当前所在的目录限制

`cd`命令可以用来切换目录

- 上一级目录“..”**（只出现于相对路径）**
- 当前目录“.”**（只出现于相对路径）**
- 用户家目录“~”或者直接cd+回车
- 上一个工作目录“-”

# LINUX文件操作

## 复制文件、目录

使用`cp`命令复制文件或目录

`cp 源文件(文件夹) 目标文件(文件夹)`

常用参数：

`-r ` 递归复制整个目录树（移动文件夹）

`-v` 显示详细信息

`-rv` 显示移动的详细信息

## 移动、重命名文件或目录

使用`mv`命令移动或者重命名文件或目录

`mv 文件 目标目录[/新文件名]`

如果指定文件名则可以重命名文件

## 创建、删除文件

通过 `touch` 命令可以创建一个空白文件或者更新已有文件的时间

通过 `rm` 命令可以删除文件或目录

常用参数：

`-i` 交互式

`-r` 递归的删除包括目录中的所有文件（删除文件夹）

`-f` 强制删除，没有警告提示（使用时需十分谨慎）

## 创建、删除目录

通过 `mkdir` 命令创建一个目录

通过`rmdir` 命令删除一个空目录

通过`rm -r (-f)` 命令删除一个非空目录

# LINUX系统目录

## bin

binary缩写 可执行二进制文件 命令（用户可使用）

## sbin

superbinary 可执行二进制文件 命令 仅超级用户root可执行

## boot

引导程序 驱动插件 内核

## dev（设备）

device缩写  将硬件设备抽象成文件

## etc

几乎所有的配置文件 纯文本 .cnf .conf(configuration 配置缩写)

## home

家目录 所有用户私有数据 文件文档桌面等 

**注：**root用户的用户文件直接存在在“/”目录下的root文件夹

## lib

library缩写 linux运行 程序运行相关的库文件 .so

## media

U盘 光盘自动挂载用 （可能有）

## mnt

正常挂载目录（必有）

## proc

系统实时信息 不存在于硬盘 只存在于内存上 基本上有一个进程就有一个文件夹

## selinux

securelinux 安全机制目录

## sys

系统底层硬件信息 查找用

## tmp

临时目录 隔段时间会自动删除

## usr

保存应用软件（默认安装）

## opt

大型软件（默认安装）

## var

经常变化的信息 如：服务器信息、日志信息（log）、cache、mail

# LINUX常用命令

## 日期时间

命令`date`用以查看时间、设置当前系统的时间：

 格式化显示时间： `+%Y--%m--%d`

命令`date -s "xx:xx:xx"`用以修改时间（root）

命令`hwclock（clock）`用以显示硬件时钟时间

命令`cal`用以查看日历

命令`uptime`用以查看系统运行时间

## 输出、查看命令

命令`echo`用以显示输入内容

命令`cat`用以显示文件内容

命令`head`用以显示文件的头几行（默认10行）

    **`-n 指定显示的行数`**

命令`tail`用以显示文件的末尾几行（默认10行）

    **`-n 指定显示的行数`**
    
    **`-f`追踪显示文件更新（一般用于查看日志，命令不会退出，而是持续显示新加入的内容）**

命令`more`用于翻页显示文件内容（只能 向下翻页）

命令`less`用于翻页显示文件内容（带上下翻页）

## 查看硬件信息

命令`lspci`用以查看PCI设备

    **`-v 查看详细信息`**

命令`lsusb`用以查看USB设备

    **`-v 查看详细信息`**

命令`lsmod`用以查看加载的模块(驱动)

## 关机、重启

命令`shutdown`用以关闭、重启计算机

`shutdown [关机、重启] 时间`

`-h` 关闭计算机

`-r` 重新启动

> 如：
>
>     立即关机： `shutdown -h now`
>    
>     10分钟后关机： `shutdown -h +10`
>    
>      23:30关机： `shutdown -h 23:30`
>    
>      立即重启： `shutdown -r now`

命令`poweroff`用以立即关闭计算机

命令`reboot`用以立即重启计算机

## 归档、压缩

命令` zip`用以压缩文件

    **`zip linuxcast.zip myfile`**

命令`unzip `用以解压缩zip文件

    **`unzip linuxcast.zip`**

命令`gzip `用以压缩文件

    **` gzip linuxcast.net`**

命令`tar `用以归档文件

    **` tar -cvf out.tar linuxcast` **
    
    **`tar -xvf linuxcast.tar`**
    
    **`tar -cvzf backup.tar.gz/etc`**
    
              **`-z参数将归档后的归档文件进行以减少大小`**

## 查找

命令` locate`用以快速查找文件、文件夹：

    **`locate keyword`**
    
    此命令需要预先建立数据库，数据库默认每天更新一次，可用`updatedb`命令手工建立、更新数据库

命令`find`用以高级查找文件、文件夹：

    **`find 查找位置 条件 查找参数`**

> **如：**
>
>     find . -name \*linuxcast*    **//-name **为**文件名**
>    
>     find . -name *.conf
>    
>     find . -perm 777    **//-perm** 为**权限**
>    
>     find . -type d    **//-type **为**目录** ；**d** 为**目录**，若为 **l** 则是**链接（快捷方式）**
>    
>     find . name "a*" -exec ls -l {} \;    **//-exec 命令 ｛｝ \ **可以使用**其结果**作为**命令的参数**
>
> 
>
> **其中，常用条件还有：**
>
>     **-user** 属于某个**特定用户（的文件）**
>    
>     **-group** 属于某个**特定组（的文件）**
>    
>     **-ctime **基于**修改时间**查找
>    
>     **-size** 基于**大小**查找

# VIM

vim在vi的基础上增加了对GUI的支持。

vim不仅仅是普通意义上的文本编辑器，而是被广泛作为文本编辑、文本处理、代码开发等等用途。

Linux中知名的文本编辑器还有emacs，它的功能比vim还要强大。

使用方式：

- 命令`vim`可以启动vim编辑器

- 一般通过`vim 目标文件路径`的形式使用vim

- 如果目标文件存在，则vim打开该文件

- 如果目标文件不存在，则vim新建并打开该文件

- vim的三种模式：

  **命令模式**：任何模式都可通过esc键回到命令模式。命令模式下可以通过键入不同命令完成选择、复制、粘贴、撤销等等操作

  **插入模式**：在命令模式中按`i`键可进入插入模式，插入模式可编辑文本内容

  **ex模式**：在命令模式中按`:`键可进入ex模式，光标会移动到底部，可保存修改或退出

## 命令模式 常用命令

- **`i` 在光标前插入文本**
- **`o` 在当前行的下面插入新行**
- **`dd` 删除整行**
- **`yy` 将当前行的内容放入缓存区（复制当前行）**
- **`n+yy` 将n行的内容放入缓存区（复制n行）**
- **`p` 将缓冲区中的文本放入光标后（粘贴）**
- **`u` 撤销上一个操作**
- **`r` 替换当前字符**
- **`/` 查找关键字**

## ex模式 常用命令

- **`:w` 保存当前修改**
- **`:q` 退出**
- **`:q!` 强制退出，不保存修改**
- **`:x` 保存并推出，相当于:wq**
- **`:set number` 显示行号**
- **`:! 系统命令` 执行一个系统命令并显示结果**
- **`:sh` 切换命令行，使用ctrl+d切换回vim**

    //可直接用**:wq表示保存并退出**，其效果同:x

    //:set number可简写为**:set nu**

# LINUX磁盘分区及文件系统

磁盘、分区、MBR与GPT

## 磁盘在LINUX中的表示

- Linux所有设备都被抽象成一个文件，保存在、dev目录下。
- 设备名称一般为hd[a-z]或sd[a-z] ([a-z]为分区号)，如：hda、hdb、sda、sdb
- IDE设备的名称为hd[a-z]，SATA、SCSI、SAS、USB等设备的名称为sd[a-z]

## 分区概念

将一个磁盘逻辑的分为几个区，每个区当做独立磁盘，以方便使用管理。（类比windows中的C盘、D盘、E盘……）

- 不同分区用：设备名称+分区号 方式表示，如sda1、sda2

**主流的分区机制分为MBR和GPT两种**

### MBR

MBR（Master Boot Record）是传统的分区机制，应用于绝大多数使用BIOS的PC设备。MBR结构共占用硬盘的头512字节（446Byte 引导代码 + 4 * 16Byte 分区表 + 2Byte 启动标识【55AA】）

- MBR支持32bit和64bit系统
- MBR支持分区数量有限
- MBR只支持不超过2T的硬盘，超过2T的硬盘只能使用2T空间（有第三方解决方法）

**MBR分区**

- 主分区：最多只能创建4个主分区，即分区表中的四个位置
- 扩展分区：一个扩展分区会占用一个主分区位置
- 逻辑分区：Linux最多支持63个IDE分区和15个SCSI分区

    //扩展分区不可用，但可以通过在扩展分区(如：/dev/sta4)上建立逻辑分区来增加分区

    //一般将系统放在主分区，其他都放在逻辑分区

### GPT

GPT（GUID Partition Table）是一个较新的分区机制，解决了MBR的很多缺点。

- 支持超过2T的磁盘
- 向后兼容MBR
- 必须在支持UEFI的硬件上才能使用
- 必须使用64bit系统
- Mac、Linux系统都能支持GPT分区格式

## 使用fdisk进行磁盘管理

fdisk是来自IBM的老牌分区工具，支持绝大多数操作系统，几乎所有的Linux的发行版本都装有fdisk，包括在Linux的rescue模式下依然能够使用。

fdisk是一个基于MBR的分区工具，所以如果需要使用GPT，则无法使用fdisk进行分区。



- fdisk命令只有具有超级用户权限才能够运行
- 使用`fdisk -l`可以列出所有安装的磁盘及其分区信息
- 使用`fdisk /dev/sda`可以对目标磁盘进行分区操作
- 分区之后需要使用`partprobe`命令让内核更新分区信息，否则需要重启才能识别新的分区
- /proc/partitions 文件也可以用来查看分区信息

## LINUX文件系统

操作系统通过文件系统管理文件及数据，磁盘或分区需要创建文件系统之后才能够为操作系统使用，创建文件系统的过程又称之为格式化。

- 没有文件系统的设备又称之为裸（raw）设备

- 常见的文件系统有fat32、NTFS、ext2、ext3、ext4、xfs、HFS等

- 文件系统之间的区别：日志、支持分区的大小、支持的单个文件大小、性能等

  window下的主流文件系统是：NTFS

  Linux下的主流文件系统是：Ext3、Ext4

  Linux支出的文件系统：ext2、ex3、ext4、fat(msdos)、vfat、nfs、iso9660、proc、gfs、jfs

### 创建文件系统

**MKE2FS**

命令`mke2fs`用来创建文件系统

>如 : ` mke2fs -t ext4 /dev/sda3`

常用参数：

**`-b` blocksize 指定文件系统块大小**

**`-c` 建立文件系统时检查坏损块**

**`-L` label 指定卷标**

**`-j` 建立文件系统日志**

**MKFS**

命令`mkfs`也可用于创建文件系统，相较于mke2fs简单，但是支持的参数较少，不能进行精细化的控制。

> 如 ：
>
> `mkfs.ext3 /dev/sda3`
>
> `mkfs.ext4 /dev/sda3`
>
> `mkfs.vfat /dev/sda3`

### 查看文件系统信息

命令`dumpe2fs`可以用来查看分区的文件系统信息

> 如 ：dumpe2fs /dev/sda2

### JOURNAL日志

**带日志的文件系统（ext3、ext4）拥有较强的稳定性，在出现错误时可以进行恢复。**

使用带日志的文件系统，文件系统会使用一个叫做“两阶段提交”的方式进行磁盘操作，当进行磁盘操作时，文件系统进行以下操作：

1. 文件系统将准备执行的事务的具体内容写入日志
2. 文件系统进行操作
3. 操作成功后，将事务的具体内容从日志中删除

这样做的好处是，当事务执行的时候如果出现意外（如断电或磁盘故障），可以通过查询日志进行恢复操作。缺点是会丧失一定的性能（额外的日志读写操作）。

### 添加标签

命令`e2label`可以用来为文件系统添加标签（建议大写）

> 如 ：
>
> `e2label /dev/sda2` 显示 sda2 的系统标签
>
> `e2label /dev/sda2 LINUXCAST` 将 sda2 的系统标签设置为LINUXCAST

### 检查并修复损坏的文件系统

命令`fsck`用来检查并修复损坏的文件系统

> 如 : `fsck /dev/sda2`

- 使用默认`-y` 参数不提示直接进行修复
- 默认fsck会自动判断文件的系统类型，如果文件系统损坏较为严重，请使用`-t` 参数指定文件系统类型。
- 对于识别文件的损坏数据（文件系统无记录），fsck会将该文件放入lost+found目录
- 系统启动时会对磁盘进行fsck操作

## 挂载、使用文件系统

### 挂载

磁盘或分区创建好文件系统后，需要挂载到一个目录才能够使用。

windows或Mac系统会进行自动挂载，一旦创建好文件系统后会自动挂载到系统上，windows上称之为C盘、D盘等

Linux需要手动挂载操作或配置系统进行自动挂载。

**MOUNT**

通过命令`mount` 命令将格式化好的磁盘或分区挂载到一个目录上

> 如 ：`mount /dev/sda3(要挂载的分区) /mnt(挂载点)`

常用参数：

**不带参数的`mount`命令会显示所有已挂载的文件系统**

**`-t` 指定文件系统的类型**

**`-o` 指定挂载选项**

**​    `ro,rw` 以只读或读写形式挂载，默认是rw**

**​    `sync` 代表不使用缓存，而是对所有操作直接写入磁盘**

**​    `async` 代表使用缓存，默认是async**

​**    `noatime` 代表每次访问文件时不更新文件的访问时间**

​**    `atime` 代表每次访问文件时更新文件的访问时间**

    **`remount` 重新挂载文件系统**

### 卸载

命令`umount`用来卸载已挂载的文件系统，相当于windows中的弹出

> 如 ：
>
> `umount 文件系统/挂载点`
>
> `umount /dev/sda3 == umount /mnt`

如果出现device is busy报错，则表示该文件系统正在被使用，无法卸载，可以使用以下命令查看使用文件系统的**进程**：`fuser -m /mnt`

也可使用命令`lsof`查看正在被使用的**文件**：`lsof /mnt`

### 自动挂载

配置文件/etc/fstab用来定义需要自动挂载的文件系统，fstab中每一行代表一个挂载配置，格式如下：

|   /dev/sda3    |  /mnt  |   ext4   | defaults |     0 0      |
| :------------: | :----: | :------: | :------: | :----------: |
| 需要挂载的设备 | 挂载点 | 文件系统 | 挂在选项 | 文件系统相关 |

**注：每两列之间有两个tab的格式化（具体按原格式）**

- 要挂载的设备也可以使用LABEL进行识别，例如：使用LABEL=LINCAST取代/dev/sda3
- `mount -a`命令会挂载所有fstab中定义的自动挂载项

# LINUX下获取帮助

**没有必要记住所有的东西**

Linux提供了极为详细的帮助工具及文档，一定要养成查帮助查文档的习惯，可以大大减少需要记忆的东西并且提高效率。

## HELP

几乎所有的命令都可以使用`-h`或`--help`参数获取使用方法、参数信息等。

## MAN

- man命令是Linux中最为常见的帮助命令，将要获取帮助的命令作为参数运行man命令就可以获取相应的文档帮助
- man文档分为很多类型 格式：`main [num] 命令`

| 部分 |         类型         |
| :--: | :------------------: |
|  1   |       用户命令       |
|  2   |     内核系统调用     |
|  3   |        库函数        |
|  4   |    特殊文件和设备    |
|  5   |    文件格式和规范    |
|  6   |         游戏         |
|  7   | 规范、标准和其他页面 |
|  8   |     系统管理命令     |
|  9   |     Linux内核API     |

- `man -k 关键字` 可以用来查询包含该关键字的文档

## INFO

- info与man类似，但是提供的信息更为详细深入，以类似网页的形式显示
- man与info都可以通过“/+关键字”方式进行搜索

## DOC

很多程序、命令都带有详细的文档，以TXT、HTML、PDF等方式保存在/usr/share/doc目录中，这些文档都是相应程序最为详尽的文档

# LINUX用户和组

当我们使用Linux时，需要以一个用户的身份登入，一个进程也需要以一个用户的身份运行，用户限制使用者或进程可以使用、不可以使用哪些资源。组用来方便组织管理用户。

- 每个用户拥有一个UserID，操作系统实际使用的是用户ID，而非用户名
- 每个用户属于一个主组，属于一个或多个附属组
- 每个组拥有一个GroupID
- 每个进程以一个用户的身份运行，并受该用户可访问的资源限制
- 每个可登录用户拥有一个指定的shell

## 用户

- 用户ID为32位，从0开始，但是为了和老式系统兼容，用户ID限制在60000以下。

- 用户分为以下三种：

  root用户（ID为0的用户）

  系统用户（1-499）

  普通用户（500以上）

- 系统中的文件都有一个所属的用户及所属组

- 使用`id`命令可以显示当前的用户信息

- 使用`passwd`命令可以修改当前用户密码

## 相关文件



**/etc/passwd**  -保存用户信息

**/etc/shadow** -保存用户密码（加密的）

**/etc/group** -保存组信息



**passwd文件基本格式：**

`用户名:x(代表密码加密在shadow文件):id:组id:用户的描述信息:家目录:登陆shell`

**shadow文件基本格式：**

`用户名:密码(!!表示该用户没有创建密码)($算法类型$salt$加密后密码):其他`

**group文件基本格式：**

`组名:组密码:组id:组内用户`

## 查看登陆的用户

命令`whoami`显示当前用户

命令`who`显示有哪些用户已经登陆系统

命令`w`显示有哪些用户已经登陆并且在干什么

## 创建一个用户

命令`useradd`用以创建一个新用户

> 如 ： `useradd wanghanli`
>
> 这个命令会执行以下操作：
>
> 1. 在 /etc/passwd 中添加用户信息
> 2. 如果使用 `passwd` 命令创建密码，则将密码加密保存在 /etc/shadow 中
> 3. 为用户建立一个新的家目录 /home/wanghanli
> 4. 将 /etc/skel中的文件复制到用户的家目录中
> 5. 建立一个与用户用户名相同的组，新建用户默认属于这个同名组

命令useradd支持以下参数：

**`-d` 家目录**

**`-s` 登陆shell**

**`-u` userid**

**`-g` 主组**

**`-G` 附属组（最多31个，用“，”分割）**

**也可以通过直接修改 /etc/passwd 的方式实现，但是不建议**

==**特别注意：**==

==在**CentOs**下useradd与adduser是没有区别的都是在创建用户，在home下自动创建目录，没有设置密码，需要使用passwd命令修改密码。==

 ==而在**Ubuntu**下useradd与adduser有所不同==

==1、useradd在使用该命令创建用户是不会在/home下自动创建与用户名同名的用户目录，而且不会自动选择shell版本，也没有设置密码，那么这个用户是不能登录的，需要使用passwd命令修改密码。==

==2、adduser在使用该命令创建用户是会在/home下自动创建与用户名同名的用户目录，系统shell版本，会在创建时会提示输入密码，更加友好。==

## 修改用户信息

命令`usermod`用来修改用户信息

`usermod 参数 username`

支持的参数：

**`-l` 新用户名**

**`-u` 新userid**

**`-d` 用户家目录位置**

**`-g` 用户所属主组**

**`-G` 用户所属附属组**

**`-L` 锁定用户使其不能登陆**

**`-U` 解除锁定**

## 删除用户

命令`userdel`用以删除指定用户：

>如 ：
>
>`userdel wanghanli` (保留用户的家目录)
>
>`userdel -r wanghanli` (同时删除用户的家目录)

## 组

几乎所有操作系统都有组的概念，通过组，我们可以更加方便的归类、管理用户。一般来讲，我们使用部门、职能或地理区域的分类方式来创建使用组。

- 每个组有一个组ID
- 组信息保存在/etc/group中
- 每个用户拥有一个主组，同时还可以拥有最多31个附属组

## 创建、修改、删除组

命令`groupadd`用以创建组：

> 如 ： `groupadd linuxcast`

命令`groupmod`用以修改组信息：

> 如 ：
>
> `groupmod -n newname oldname` 修改组名
>
> `groupmod -g newGid oldGid` 修改组 ID

命令`groupdel`用以删除组：

> 如 ：`groupdel linuxcast`

## 权限

### 文件权限

每个文件拥有以下三种权限：

|   权限    |  对文件的影响  |      对目录的影响      |
| :-------: | :------------: | :--------------------: |
| r（读取） | 可读取文件内容 |     可列出目录内容     |
| w（写入） | 可修改文件内容 | 可在目录中创建删除文件 |
| x（执行） | 可作为命令执行 |     可访问目录内容     |

**目录必须拥有x权限，否则无法查看其内容。**

### UGO

Linux权限基于UGO模型进行控制：

- U代表User，G代表Group，O代表Other
- 每一个文件的权限基于UGO进行设置
- 权限三个一组（rwx），对应UGO分别设置
- 每一个文件拥有一个所属用户和所属组，对应UG，不属于该文件所属用户或所属组的使用O权限

命令 `ls -l` 可以查看当前目录下文件的详细信息

文件类型：**d:** 目录 **-:** 普通文件 **l:** 链接

![1531472377055](E:\WORK\Arceus\ls-l.png)

### 修改文件所属用户、组

命令 `chown` 用以改变文件的所属用户：

```
chown <用户名> <文件名>
```

**-R**参数递归的修改目录下的所有文件的所属用户

命令 `chgrp` 用以改变文件的所属组：

```
chgrp <组名> <文件名>
```

**-R**参数递归的修改目录下的所有文件的所属组

### 修改权限

命令 `chmod` 用以修改文件的权限

```
chmod <模式> <文件>
```

模式为如下格式：

- u、g、o 分别代表用户、组和其他
- a 可以指代 ugo
- +、- 代表加入或删除对应权限
- r、w、x 代表三种权限

> 模式示例：
>
> chmod u+rw linuxcast.net
>
> chmod g-x linuxcast.net
>
> chmod go+r linuxcast.net
>
> chmod a-x linuxcast.net

**数字方式**修改权限，三个权限分别由三个数字表示：

- **r = 4（2^2）**
- **w = 2（2^1）**
- **x = 1（2^0）**

使用数字表示权限时，每组权限分别对应数字之和：

**rw = 4+2 = 6**

**rwx = 4+2+1 = 7**

**r-x = 4+1 =5**

> 示例：
>
> chmod 660 linuxcast.net == rw-rw----
>
> chmod 775 linuxcast.net == rwxrwxr-x

### 默认权限

每一个终端都有一个umask属性，来确定新建文件、文件夹的默认权限

umask使用数字权限方式表示，如：022

**目录**的默认权限是：777-umask

**文件**的默认权限是：666-umask

一般，**普通用户**的默认umask是002，**root用户**的默认umask是022

也就是说，对于普通用户来讲：

**新建文件**的权限是：**666-002 = 664**

**新建目录**的权限是：**777-002 = 775**

命令 `umask` 用以查看和设置umask值

### 特殊权限（3）

|  权限  |                 对文件的影响                 |                         对目录的影响                         |
| :----: | :------------------------------------------: | :----------------------------------------------------------: |
|  suid  | 以文件的所属用户身份执行，而非执行文件的用户 |                              无                              |
|  sgid  |             以文件所属组身份执行             |     在该目录中创建任意新文件的所属组与该目录的所属组相同     |
| sticky |                      无                      | 对目录拥有写入权限的用户仅可以删除其拥有的文件，无法删除其他用户所拥有的文件 |

**设置特殊权限**

设置suid：

```
chmod u+s <文件>
```

设置sgid：

```
chmod g+s <文件/目录>
```

设置sticky：

```
chmod o+t <文件>
```

与普通权限一样，特殊权限也可以使用数字方式表示：

- SUID = 4
- SGID = 2
- Sticky = 1

> 所以示例：
>
> chmod 4755 linuxcast.net